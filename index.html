<!DOCTYPE html>
<html>
<head>
<title>Notes Post</title>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<link rel="stylesheet" href="css/materialize.min.css">
<link rel="stylesheet" href="css/style.css">

</head>
<body class="blue lighten-1 ">
    <div class="container">
        <div class="row">
            <div class="col m10 offset-m1">
                <h1 class="center white-text">Notes</h1>
                <div class="card-panel">
                    <form>
                        <div class="input-field">
                            <label for="textarea1">Write here!</label>
                            <textarea id="textarea1" class="materialize-textarea"></textarea>
                            
                        </div>
                        <input type="submit" id="postNote" class="btn blue darken-2" value="Post" disabled>
                    </form>
                </div><!--card-->

                <div id="note-container">
                    
                </div><!--note container-->


            </div><!--col-->
        </div><!--row-->
    </div> <!--container-->

    <script src="js/materialize.min.js"></script>
    <script src="js/jquery-3.4.1.min.js"></script>
    <script> 
    //when u type in the text area the button get enabled once u stop typing
   $("#textarea1").keyup(function(){
    if($(this).val())
    {
        $("#postNote").removeAttr('disabled');
    }
    else{
        $("#postNote").attr('disabled',true);
    }
   })
   
   var post=function(requestType , id){
          var text=$("#textarea1").val();
          var user="Fatma Mohammed";
          if(requestType == undefined && id == undefined )
            {
                requestType = "";
            }else if(id == undefined){
                id='';
            }else if(requestType == "del"){
                var a = window.confirm("are you sure you want to delete this?");
                if(a == false)
                {
                    id='';
                }
            }
       // window.alert(requestType);

        $.get("server.php",
    {
        t:text,
        u:user,
        d:id,
        req:requestType
        
    }).done(function(data)
    {
       $("#note-container").html(data);
       $("#textarea1").val("");
    })
    }


    $(document).ready(post);

    //calling the post funcrion from the submit buttom with preventing the ready document from invoking it 
   $("#postNote").click(function(){
       var type = "add";
       post(type);
   })
   
    //prevent the page from reloading when pressing submit
   $("form").submit(function(a){
       a.preventDefault();
   })
  
    </script>
</body>
</html>


